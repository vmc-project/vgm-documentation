<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.80.0"><meta name=description content><link rel=icon href=/vgm-documentation/images/favicon.png type=image/png><title>Geometry Conversions :: VGM</title><link href=/vgm-documentation/css/nucleus.css?1613662172 rel=stylesheet><link href=/vgm-documentation/css/fontawesome-all.min.css?1613662172 rel=stylesheet><link href=/vgm-documentation/css/hybrid.css?1613662172 rel=stylesheet><link href=/vgm-documentation/css/featherlight.min.css?1613662172 rel=stylesheet><link href=/vgm-documentation/css/perfect-scrollbar.min.css?1613662172 rel=stylesheet><link href=/vgm-documentation/css/auto-complete.css?1613662172 rel=stylesheet><link href=/vgm-documentation/css/atom-one-dark-reasonable.css?1613662172 rel=stylesheet><link href=/vgm-documentation/css/theme.css?1613662172 rel=stylesheet><link href=/vgm-documentation/css/hugo-theme.css?1613662172 rel=stylesheet><link href=/vgm-documentation/css/theme-vmc.css?1613662172 rel=stylesheet><script src=/vgm-documentation/js/jquery-3.3.1.min.js?1613662172></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/vgm-documentation/user-guide/geometry-conversions/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=https://vmc-project.github.io/vgm-documentation/><img src=/vgm-documentation/images/VGMlogo6_white.png width=80%></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/vgm-documentation/js/lunr.min.js?1613662172></script><script type=text/javascript src=/vgm-documentation/js/auto-complete.js?1613662172></script><script type=text/javascript>var baseurl="https:\/\/vmc-project.github.io\/vgm-documentation\/";</script><script type=text/javascript src=/vgm-documentation/js/search.js?1613662172></script></div><div class=highlightable><ul class=topics><li data-nav-id=/vgm-documentation/download/ title=Download class=dd-item><a href=/vgm-documentation/download/>Download</a></li><li data-nav-id=/vgm-documentation/installation/ title=Installation class=dd-item><a href=/vgm-documentation/installation/>Installation</a><ul><li data-nav-id=/vgm-documentation/installation/vgm_test/ title=vgm_test class=dd-item><a href=/vgm-documentation/installation/vgm_test/>vgm_test</a></li></ul></li><li data-nav-id=/vgm-documentation/user-guide/ title="User Guide" class="dd-item
parent"><a href=/vgm-documentation/user-guide/>User Guide</a><ul><li data-nav-id=/vgm-documentation/user-guide/geometry-conversions/ title="Geometry Conversions" class="dd-item active"><a href=/vgm-documentation/user-guide/geometry-conversions/>Geometry Conversions</a></li><li data-nav-id=/vgm-documentation/user-guide/geometry-construction/ title="Geometry Construction" class=dd-item><a href=/vgm-documentation/user-guide/geometry-construction/>Geometry Construction</a></li><li data-nav-id=/vgm-documentation/user-guide/options/ title=Options class=dd-item><a href=/vgm-documentation/user-guide/options/>Options</a></li><li data-nav-id=/vgm-documentation/user-guide/xml/ title=XML class=dd-item><a href=/vgm-documentation/user-guide/xml/>XML</a></li></ul></li><li data-nav-id=/vgm-documentation/reference/ title=Reference class=dd-item><a href=/vgm-documentation/reference/>Reference</a></li><li data-nav-id=/vgm-documentation/examples/ title=Examples class=dd-item><a href=/vgm-documentation/examples/>Examples</a></li><li data-nav-id=/vgm-documentation/support/ title=Support class=dd-item><a href=/vgm-documentation/support/>Support</a></li><li data-nav-id=/vgm-documentation/publications/ title=Publications class=dd-item><a href=/vgm-documentation/publications/>Publications</a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/vmc-project/vgm><i class="fab fa-github"></i>vgm project on Github</a></li></ul></section><section id=footer><p>Built from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/vgm-documentation/>Home</a> > <a href=/vgm-documentation/user-guide/>User Guide</a> > Geometry Conversions</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#volume-hierarchy>Volume hierarchy</a></li><li><a href=#single-solid>Single Solid</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Geometry Conversions</h1><h3 id=volume-hierarchy>Volume hierarchy</h3><p>To convert native geometry from one geometry model to another one, the geometry has to be first imported in VGM (the native geometry objects will be mapped to the VGM interfaces) using the concrete VGM factory for this geometry model, and then exported using the VGM factory for the other geometry model.</p><p>To convert Geant4 geometry in ROOT:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++> <span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;Geant4GM/volumes/Factory.h&#34; </span><span style=color:#75715e>
</span><span style=color:#75715e></span> <span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;RootGM/volumes/Factory.h&#34; </span><span style=color:#75715e>
</span><span style=color:#75715e></span> <span style=color:#75715e>#include</span> <span style=color:#75715e>&#34;TGeoManager.h&#34;                               </span><span style=color:#75715e>
</span><span style=color:#75715e></span>                                                        
 <span style=color:#75715e>// Import Geant4 geometry to VGM                       
</span><span style=color:#75715e></span> Geant4GM<span style=color:#f92672>::</span>Factory g4Factory;
 g4Factory.Import(physiWorld);                          
      <span style=color:#75715e>// where physiWorld is of G4VPhysicalVolume* type 
</span><span style=color:#75715e></span>
 <span style=color:#75715e>// Export VGM geometry to Root                         
</span><span style=color:#75715e></span> RootGM<span style=color:#f92672>::</span>Factory rtFactory;
 g4Factory.Export(<span style=color:#f92672>&amp;</span>rtFactory);
 gGeoManager<span style=color:#f92672>-&gt;</span>CloseGeometry();
 <span style=color:#66d9ef>return</span> rtFactory.World();                              
      <span style=color:#75715e>// returns Root top node, of TGeoNode* type       
</span></code></pre></div><p>The geometry conversions between Geant4 and ROOT geometry models are demonstrated in the provided examples E01 and E02.</p><h3 id=single-solid>Single Solid</h3><p>Since version 4.4, it is also to use VGM to convert a single solid from one geometry model into another one:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++>  XFactory xFactory;
  YFactory yFactory;
  xFactory.Import(xsolid);
  xFactory.Export(yFactory);
  YSolid<span style=color:#f92672>*</span> ysolid <span style=color:#f92672>=</span> yFactory.Solid();                    
</code></pre></div><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/vgm-documentation/user-guide/ title="User Guide"><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/vgm-documentation/user-guide/geometry-construction/ title="Geometry Construction" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/vgm-documentation/js/clipboard.min.js?1613662172></script><script src=/vgm-documentation/js/perfect-scrollbar.min.js?1613662172></script><script src=/vgm-documentation/js/perfect-scrollbar.jquery.min.js?1613662172></script><script src=/vgm-documentation/js/jquery.sticky.js?1613662172></script><script src=/vgm-documentation/js/featherlight.min.js?1613662172></script><script src=/vgm-documentation/js/highlight.pack.js?1613662172></script><script>hljs.initHighlightingOnLoad();</script><script src=/vgm-documentation/js/modernizr.custom-3.6.0.js?1613662172></script><script src=/vgm-documentation/js/learn.js?1613662172></script><script src=/vgm-documentation/js/hugo-learn.js?1613662172></script><link href=/vgm-documentation/mermaid/mermaid.css?1613662172 rel=stylesheet><script src=/vgm-documentation/mermaid/mermaid.js?1613662172></script><script>mermaid.initialize({startOnLoad:true});</script></body></html>